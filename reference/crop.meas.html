<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Manual editing of observation window of flux measurements — crop.meas • goFlux</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Manual editing of observation window of flux measurements — crop.meas"><meta property="og:description" content="Crop measurements from the start, from the end, or adjust the deadband.
Individual parameters can be provided for each measurement, in an auxiliary
file, or the same parameters can be applied to all measurements."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">goFlux</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Manual editing of observation window of flux measurements</h1>

    <div class="hidden name"><code>crop.meas.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Crop measurements from the start, from the end, or adjust the deadband.
Individual parameters can be provided for each measurement, in an auxiliary
file, or the same parameters can be applied to all measurements.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">crop.meas</span><span class="op">(</span></span>
<span>  <span class="va">dataframe</span>,</span>
<span>  auxfile <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  crop_start <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  crop_end <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  deadband <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  max.obs.length <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cham.close <span class="op">=</span> <span class="st">"start.time"</span>,</span>
<span>  cham.open <span class="op">=</span> <span class="st">"end.time"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-dataframe">dataframe<a class="anchor" aria-label="anchor" href="#arg-dataframe"></a></dt>
<dd><p>a dataframe containing gas measurements, output from
import or ID functions (click.peak2 or manID). Must contain
the columns <code>UniqueID</code>, <code>start.time</code>,
<code>end.time</code> and <code>Etime</code>.</p></dd>


<dt id="arg-auxfile">auxfile<a class="anchor" aria-label="anchor" href="#arg-auxfile"></a></dt>
<dd><p>data.frame; auxiliary data frame containing the columns
<code>UniqueID</code>, <code>crop_start</code>, <code>crop_end</code>,
<code>deadband</code> and/or <code>max.obs.length</code>.</p></dd>


<dt id="arg-crop-start">crop_start<a class="anchor" aria-label="anchor" href="#arg-crop-start"></a></dt>
<dd><p>numerical; number of observations to remove at the start
of the measurement. To provide a unique value per
UniqueID, the column <code>crop_start</code> must be present
in the auxfile and the argument must be set to
<code>crop_start = "aux"</code>.</p></dd>


<dt id="arg-crop-end">crop_end<a class="anchor" aria-label="anchor" href="#arg-crop-end"></a></dt>
<dd><p>numerical; number of observations to remove at the
end of the measurement. To provide a unique value per
UniqueID, the column <code>crop_end</code> must be present
in the auxfile and the argument must be set to
<code>crop_end = "aux"</code>.</p></dd>


<dt id="arg-deadband">deadband<a class="anchor" aria-label="anchor" href="#arg-deadband"></a></dt>
<dd><p>numerical; define a deadband at the start of measurements
(seconds). To provide a unique value per UniqueID, the column
<code>deadband</code> must be present in the auxfile and the
argument must be set to <code>deadband = "aux"</code>.</p></dd>


<dt id="arg-max-obs-length">max.obs.length<a class="anchor" aria-label="anchor" href="#arg-max-obs-length"></a></dt>
<dd><p>numerical; maximum length of measurement (seconds) to
keep after <code>cham.close</code>. To provide a unique value
per UniqueID, the column <code>max.obs.length</code> must be
present in the auxfile and the argument must be set to
<code>max.obs.length = "aux"</code>.</p></dd>


<dt id="arg-cham-close">cham.close<a class="anchor" aria-label="anchor" href="#arg-cham-close"></a></dt>
<dd><p>character; if <code>cham.close = "start.time"</code> (default), the
original <code>start.time</code> before cropping will be saved into
a new column <code>cham.close</code>. Set <code>cham.close = NULL</code>
to drop the original <code>start.time</code>.</p></dd>


<dt id="arg-cham-open">cham.open<a class="anchor" aria-label="anchor" href="#arg-cham-open"></a></dt>
<dd><p>character; if <code>cham.open = "end.time"</code> (default), the
original <code>end.time</code> before cropping will be saved into
a new column <code>cham.open</code>. Set <code>cham.open = NULL</code>
to drop the original <code>end.time</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>a data frame, with corrected Etime and flag, based on newly defined
         start.time, end.time and deadband.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Note that <code>crop_start</code> and <code>deadband</code> "crop" the start of the
measurements in the same way.</p>
<p>Note that if <code>max.obs.length</code> is defined, <code>end.time</code> is calculated
based on <code>cham.close</code> (original <code>start.time</code> in <code>dataframe</code>, if
<code>cham.close = "start.time"</code>) and <code>max.obs.length</code>, regardless of other
defined values in the function. If <code>cham.close = NULL</code>, <code>end.time</code>
is calculated based on <code>start.time</code> and <code>max.obs.length</code>.</p>
<p>If <code>cham.close</code> and <code>cham.open</code> are originally present in
<code>dataframe</code>, set arguments <code>cham.close</code> and <code>cham.open</code>
to <code>NULL</code>.</p>
<p>Note that the arguments <code>crop_start</code> and <code>crop_end</code> accept negative
values and can be used to include more data points before and after the
previously defined <code>start.time</code> and <code>end.time</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load example data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">manID.G2201i</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create an auxfile to define different crop_start and crop_end per UniqueID</span></span></span>
<span class="r-in"><span><span class="va">auxfile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind.data.frame</a></span><span class="op">(</span>UniqueID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"meas1"</span>, <span class="st">"meas2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            crop_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            crop_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The arguments "crop_start" and "crop_end" must be set to "aux" to use</span></span></span>
<span class="r-in"><span><span class="co"># unique values from the auxfile</span></span></span>
<span class="r-in"><span><span class="va">crop.G2201i</span> <span class="op">&lt;-</span> <span class="fu">crop.meas</span><span class="op">(</span>dataframe <span class="op">=</span> <span class="va">manID.G2201i</span>, auxfile <span class="op">=</span> <span class="va">auxfile</span>,</span></span>
<span class="r-in"><span>                         crop_start <span class="op">=</span> <span class="st">"aux"</span>, crop_end <span class="op">=</span> <span class="st">"aux"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Alternatively, cropping can be applied equally across all measurements</span></span></span>
<span class="r-in"><span><span class="va">crop.G2201i</span> <span class="op">&lt;-</span> <span class="fu">crop.meas</span><span class="op">(</span>dataframe <span class="op">=</span> <span class="va">manID.G2201i</span>, auxfile <span class="op">=</span> <span class="va">auxfile</span>,</span></span>
<span class="r-in"><span>                         crop_start <span class="op">=</span> <span class="fl">5</span>, crop_end <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Karelle Rheault, Klaus Steenberg Larsen.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

